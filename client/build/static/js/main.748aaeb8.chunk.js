(this["webpackJsonpprueba-tecnica"]=this["webpackJsonpprueba-tecnica"]||[]).push([[0],{108:function(e,t){},233:function(e,t,n){},252:function(e,t,n){},263:function(e,t){},265:function(e,t){},310:function(e,t){},312:function(e,t){},344:function(e,t){},346:function(e,t){},347:function(e,t){},352:function(e,t){},354:function(e,t){},360:function(e,t){},362:function(e,t){},381:function(e,t){},393:function(e,t){},396:function(e,t){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(226),r=n.n(c),s=n(57),i=n(5),u=(n(233),n(8)),o=n.n(u),l=n(30),j=n(9),b=function(e){return/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/.test(e)},O=function(e){return/^[a-zA-Z]+( [a-zA-Z]+)*$/.test(e)},d=n(59),h=n.n(d),x="https://prueba-tecnica-llloyola.herokuapp.com/api/auth/",f=function(e,t,n){return h.a.post(x+"signup",{name:e,email:t,password:n})},p=function(e,t){return h.a.post(x+"signin",{email:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},v=(n(252),n(1));var g=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),u=s[0],d=s[1],h=Object(a.useState)(""),x=Object(j.a)(h,2),g=x[0],m=x[1],S=Object(a.useState)(""),N=Object(j.a)(S,2),A=N[0],T=N[1],y=Object(a.useState)(""),k=Object(j.a)(y,2),I=k[0],w=k[1],C=Object(a.useState)(""),E=Object(j.a)(C,2),D=E[0],z=E[1],B=Object(a.useState)(""),F=Object(j.a)(B,2),L=F[0],P=F[1],G=Object(a.useState)(""),K=Object(j.a)(G,2),Q=K[0],X=K[1],Y=Object(a.useState)(""),Z=Object(j.a)(Y,2),V=Z[0],M=Z[1],R=Object(a.useState)(!1),H=Object(j.a)(R,2),J=H[0],W=H[1],U=Object(a.useState)(!1),q=Object(j.a)(U,2),$=q[0],_=q[1],ee=Object(a.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){M(""),n?O(n)?d(""):d("Please use only letters and spaces."):d("")}),[n]),Object(a.useEffect)((function(){M(""),g?b(g)?T(""):T("Please enter a valid email."):T("")}),[g]),Object(a.useEffect)((function(){M(""),P(D&&I&&I!==D?"The passwords must match.":"")}),[I,D]),Object(a.useEffect)((function(){M(""),I&&I.length<8?X("Password must have at least 8 characters."):X("")}),[I]);var ce=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(!n||!O(n)||!g||!b(g)||!I||!D||I!==D||I.length<8)){e.next=6;break}M("Complete every field correctly to sign up!"),e.next=9;break;case 6:return W(!0),e.next=9,f(n,g,I).then((function(){p(g,I)})).then((function(e){W(!1),_(!0)})).catch((function(e){M("Email is already in use!"),W(!1)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:ne?Object(v.jsx)(i.a,{to:"/signin"}):$?Object(v.jsx)(i.a,{to:"/table"}):Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("form",{children:[Object(v.jsx)("h3",{children:"Please sign up"}),Object(v.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Name"}),Object(v.jsx)("div",{className:"error",children:u}),Object(v.jsx)("input",{value:g,onChange:function(e){return m(e.target.value)},type:"text",placeholder:"Email"}),Object(v.jsx)("div",{className:"error",children:A}),Object(v.jsx)("input",{value:I,onChange:function(e){return w(e.target.value)},type:"password",placeholder:"Password"}),Object(v.jsx)("div",{className:"error",children:Q}),Object(v.jsx)("input",{value:D,onChange:function(e){return z(e.target.value)},type:"password",placeholder:"Confirm Password"}),Object(v.jsx)("div",{className:"error",children:L}),Object(v.jsx)("button",{onClick:function(e){return ce(e)},children:J?"Loading...":"Submit"}),Object(v.jsx)("div",{className:"error",children:V})]}),Object(v.jsx)("h4",{children:"Already have an account?"}),Object(v.jsx)("button",{onClick:function(e){return e.preventDefault(),void ae(!0)},children:"Sign in!"})]})})},m=n(228),S=n(450),N=n(227),A=function(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e))&&"."!==e[e.length-1])},T=function(e,t,n){return h.a.create({transformRequest:[function(e,t){return JSON.stringify(e)}]}).post("https://hooks.zapier.com/hooks/catch/6872019/oahrt5g",{idOp:e,tasa:t.includes(".")?parseFloat(t):parseInt(t),email:n},{headers:{Accept:"application/json"}})},y=(n(445),function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.GoogleSpreadsheet("1x-xYIr2IDMYk2BLlx3DCOpB4tT5I-axkAUB9JZDQa-A"),e.prev=1,e.next=4,t.useServiceAccountAuth({client_email:"prueba-tecnica-luis-loyola@deft-return-335201.iam.gserviceaccount.com",private_key:"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCqTvk7jo4zeLNo\\n4E/hzcYR2tcCUWqgUJl9AyU/jP9T81nO2Lv2PvBPjfFXvmRrQpWu+tmAKPLiGu93\\nnTV3nApCFGvZ4oOeyq0joUZ5yXze6IVF8NSnYKfnn8pk6aUjGO/5nee2plIz1wSB\\nKHrtKk3l4LzSWtUT/G0EG4KAQ0EIMQ7WBVZDZCR2YhsCIiXPqrSV+B4gSlrZlAaC\\n2I9j+6D7GQ8+d+ivXOb1dWJhmKpYJwxLCpPZeVBnOad62i823qGD57VsgLVR85yK\\nz279btVhnAF5bcYT3DlFRZN6Qubj5VTPT0kK78R+GRX2QaVgadr7muvS5VwoOVfX\\nsM+hIbqZAgMBAAECggEAMFhyz8FMBLiC1Ya3pnXvgCoLVxEdn5zBtYcrD7tKz94I\\n5HsKAIElXrAAjtPxVbF1JFL5YzQ8nore56ms/+M/1jpN03BFxNHsDG0/wFq+I9kF\\n3DDdbRY3E718iuD4i9oMZWO531Ofii/Di5aeLq0Pp+4ALAa07hN+LuhQR3DQCS7N\\nY9egDmKXbNHIhRbC/9/duwB60INeFhcuZPh22JCAa4UXHEfT3OiW3ybbubTxx8kJ\\nHXEFSsTe6nzTO8W4rxvYXwTJTvuvC//JIuTNLWDaD6nDvvBf14WlAYdrqJNLMNmu\\nUakHUCyncSzzjvFM212+2TH730hrtH828zZBuBIE8QKBgQDT3KBmgoMeYKK4HXLd\\ntblAYklD3ZGZWzved/bkINUFRLdQEgYszu/rHlEAf0/ju1+VfIGxp+jVATUiBkQ6\\nNEs/MliPa/Ot/SV5SPiCC2eTsixUlFChF1FQVG/gxvUCD/7J4MDTkev5wKAEek5I\\nQ8oi00xhTtwbn+Guu+SsYOO+zwKBgQDNyieC2lO0y89GZahmcr3NcL/HztQTbk9J\\nueAhXj2MFImrx61Xopt/SLmPud/RY/3/jUfXaIWBaCr40KhjzEwOj3clSi7vHf/h\\nR7POzrfy6ch3VFoXuQpvTznNj5iy9TBdiAW4qY/vGQCSSKPGnjY6guT0urBReQ4+\\nBMX1zzCKFwKBgD5ifxDwaW+ugPu6IDLM6gndZzmGqvL/fHeb16WBTXjJrTj0tcDI\\nBrmzKaL92iZy7Eh2azJHATaHrn+gXMLO10F6r707ynt3SWuXYyXX+d3x3z/glIV6\\n+kSvOGp163t5/kqv1df25gebAwOOiDKbU5BBrAITWJkB0VDEnydrOGTdAoGAU9B1\\n7zGEzioELaPRxogNDdNSCMsQTSmsWVa/FlgPsTHcMH6O9xZfRqQUD5mgsuOK275q\\n+Cy101LdzaEONDdM8tEzsZhZLUKGqPZPIXfIK8NTxmYwm2DeAx+9Zx+JDboXDMEN\\ns3w8ByGjvfCf45EkfQg6wAIZNdWcG15OUiMkndkCgYEAibxSflY4lWoX0lwUZfRe\\nETnDISSyT6hy1LShUyQCDdxOBG1nTtt5Z8HXOKLlur3juGRcguEN8/YCRZxOWFSM\\nHJcV/Hxvo17SA2NEktOeKI88Aa47x0FnIPV8T8Gjd+GSHckXD3ihJOfi64CTAOFM\\ncQga8FsFNFzI5rgcOrF37dw=\\n-----END PRIVATE KEY-----\\n".replace(/\\n/g,"\n")});case 4:return e.next=6,t.loadInfo();case 6:return n=t.sheetsById[0],e.next=9,n.getRows();case 9:return a=e.sent,e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(1),console.error("Error: ",e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}());var k=function(){var e=Object(S.a)(y,[]),t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),u=Object(j.a)(s,2),b=u[0],O=u[1],d=Object(a.useState)([]),h=Object(j.a)(d,2),x=h[0],f=h[1],p=Object(a.useState)(!1),g=Object(j.a)(p,2),N=g[0],k=g[1],I=JSON.parse(localStorage.getItem("user")),w=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,!A(a)){e.next=7;break}return n.Tasa=a,e.next=5,n.save();case 5:return e.next=7,T(n["id Op"],n.Tasa,"llloyola@uc.cl").then((function(){T(n["id Op"],n.Tasa,I.email)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){e.preventDefault(),localStorage.removeItem("user"),O(!0)};return e.value&&!x.length&&f(e.value.map((function(e){return{"id Op":e["id Op"],Tasa:e.Tasa}}))),Object(v.jsx)(v.Fragment,{children:b||!I.accessToken?Object(v.jsx)(i.a,{to:"/"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"navbar",children:[Object(v.jsx)("h2",{children:I?"Hi, ".concat(I.name,"!"):""}),Object(v.jsx)("h2",{children:"Welcome to Luis' Internship Test"}),Object(v.jsx)("button",{onClick:function(e){return C(e)},children:"Log out"})]}),Object(v.jsx)("div",{className:"table-container",style:{height:500,width:500,margin:"auto"},children:e.error?Object(v.jsx)("h3",{children:" An error has ocurred "}):e.loading?Object(v.jsx)("h3",{children:"Loading..."}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Id"}),Object(v.jsx)("th",{children:"Rate"})]})}),Object(v.jsx)("tbody",{children:e.value&&e.value.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e["id Op"]}),Object(v.jsxs)("td",{className:"rate",children:[Object(v.jsx)("input",{type:"text",defaultValue:e.Tasa,onBlur:function(t){w(t,e)},onChange:function(e){return function(e,t){var n=t%2?"#f2f2f2":"white",a=e.target.value;A(a)||c.includes(t)?A(a)&&c.includes(t)&&r(c.filter((function(e){return e!==t}))):r([].concat(Object(m.a)(c),[t])),e.target.style.backgroundColor=A(a)?n:"rgb(227, 87, 87)"}(e,t)}}),Object(v.jsx)("p",{className:"error-msg",children:c.includes(t)?"Invalid number":""})]})]},e["id Op"])}))})]}),I?Object(v.jsx)("button",{className:"email",onClick:function(){return k(!N)},children:N?Object(v.jsx)("span",{children:"Don't send changes to ".concat(I.email)}):Object(v.jsx)("span",{children:"Send changes to ".concat(I.email)})}):Object(v.jsx)("button",{className:"email",children:"Loading data..."}),Object(v.jsx)("button",{className:"revert",onClick:function(t){return t.preventDefault(),e.value.forEach(function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Tasa=x[n].Tasa,e.next=3,t.save();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),void window.location.reload()},children:"Revert changes"})]})})]})})};n(446);var I=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(j.a)(r,2),u=s[0],O=s[1],d=Object(a.useState)(""),h=Object(j.a)(d,2),x=h[0],f=h[1],g=Object(a.useState)(""),m=Object(j.a)(g,2),S=m[0],N=m[1],A=Object(a.useState)(!1),T=Object(j.a)(A,2),y=T[0],k=T[1],I=Object(a.useState)(!1),w=Object(j.a)(I,2),C=w[0],E=w[1],D=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(!n||!b(n)||!x)){e.next=6;break}N("Complete every field correctly to sign in!"),e.next=9;break;case 6:return k(!0),e.next=9,p(n,x).then((function(e){k(!1),E(!0)})).catch((function(e){k(!1),N("Email doesn't match the password. Try again.")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){N(""),n?b(n)?O(""):O("Please enter a valid email."):O("")}),[n]),Object(v.jsx)(v.Fragment,{children:C?Object(v.jsx)(i.a,{to:"/table"}):Object(v.jsx)("div",{className:"signin",children:Object(v.jsxs)("form",{children:[Object(v.jsx)("h3",{children:"Please sign in"}),Object(v.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Email"}),Object(v.jsx)("div",{className:"error",children:u}),Object(v.jsx)("input",{value:x,onChange:function(e){return f(e.target.value)},type:"password",placeholder:"Password"}),Object(v.jsx)("div",{className:"error",children:""}),Object(v.jsx)("button",{onClick:function(e){return D(e)},children:y?"Loading...":"Submit"}),Object(v.jsx)("div",{className:"error",children:S})]})})})},w=(n(447),function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"navbar",children:Object(v.jsx)("h2",{children:"Welcome to Luis' Internship Test"})}),Object(v.jsx)("h3",{children:"Nothing to look in here!"})]})});r.a.render(Object(v.jsx)(s.a,{children:Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{path:"/",element:Object(v.jsx)(g,{})}),Object(v.jsx)(i.b,{path:"/signin",element:Object(v.jsx)(I,{})}),Object(v.jsx)(i.b,{path:"/table",element:Object(v.jsx)(k,{})}),Object(v.jsx)(i.b,{path:"*",element:Object(v.jsx)(w,{})})]})}),document.getElementById("root"))}},[[448,1,2]]]);
//# sourceMappingURL=main.748aaeb8.chunk.js.map